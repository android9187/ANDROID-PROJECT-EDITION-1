{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "d6aa74cd-7e1c-4487-8a33-2d8bbb3e5e60",
   "metadata": {},
   "outputs": [],
   "source": [
    "import requests # –∏–ø–æ—Ä—Ç–∏—Ä—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É http-–∑–∞–ø—Ä–æ—Å–æ–≤\n",
    "\n",
    "class CurrencyConverter:\n",
    "    def __init__(self):\n",
    "        self.rates = self._get_rates()\n",
    "    \n",
    "    def _get_rates(self): # –ø–æ–ª—É—á–∞–µ—Ç –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç —Å API\n",
    "        try:\n",
    "            # –ø–æ–ª—É—á–∞–µ–º –∫—É—Ä—Å—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ RUB\n",
    "            response = requests.get(\"https://api.exchangerate.host/latest?base=RUB\", timeout = 5)\n",
    "            data = response.json()\n",
    "            return data['rates']\n",
    "        except:\n",
    "            # —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫—É—Ä—Å—ã –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (—Å–∫–æ–ª—å–∫–æ —Ä—É–±–ª–µ–π –∑–∞ 1 –µ–¥–∏–Ω–∏—Ü—É –≤–∞–ª—é—Ç—ã)\n",
    "            return {\n",
    "                'USD': 0.0109,  # 1 USD = 91.74 RUB ‚Üí 1 RUB = 0.0109 USD\n",
    "                'EUR': 0.0101,  # 1 EUR = 99.01 RUB ‚Üí 1 RUB = 0.0101 EUR\n",
    "                'RUB': 1.0,     # 1 RUB = 1 RUB\n",
    "                'GBP': 0.0086,  # 1 GBP = 116.28 RUB ‚Üí 1 RUB = 0.0086 GBP\n",
    "                'JPY': 1.61,    # 1 JPY = 0.62 RUB ‚Üí 1 RUB = 1.61 JPY\n",
    "                'CNY': 0.078,   # 1 CNY = 12.82 RUB ‚Üí 1 RUB = 0.078 CNY\n",
    "                'KZT': 5.12     # 1 KZT = 0.195 RUB ‚Üí 1 RUB = 5.12 KZT\n",
    "            }\n",
    "    \n",
    "    def convert(self, amount, from_curr, to_curr):\n",
    "        \"\"\"–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Å—É–º–º—É –∏–∑ –æ–¥–Ω–æ–π –≤–∞–ª—é—Ç—ã –≤ –¥—Ä—É–≥—É—é\"\"\"\n",
    "        from_curr = from_curr.upper()\n",
    "        to_curr = to_curr.upper()\n",
    "        \n",
    "        if from_curr not in self.rates or to_curr not in self.rates:\n",
    "            return None\n",
    "        \n",
    "        # –ø—Ä—è–º–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è\n",
    "        rub_amount = amount * self.rates[from_curr]  # –ø–µ—Ä–µ–≤–æ–¥–∏–º –≤ —Ä—É–±–ª–∏\n",
    "        result = rub_amount / self.rates[to_curr]    # –ø–µ—Ä–µ–≤–æ–¥–∏–º –∏–∑ —Ä—É–±–ª–µ–π –≤ —Ü–µ–ª–µ–≤—É—é –≤–∞–ª—é—Ç—É\n",
    "        \n",
    "        return round(result, 2)\n",
    "\n",
    "def main():\n",
    "    converter = CurrencyConverter()\n",
    "    \n",
    "    print(\"=== –ö–û–ù–í–ï–†–¢–ï–† –í–ê–õ–Æ–¢ ===\")\n",
    "    print(\"–î–ª—è –≤—ã—Ö–æ–¥–∞ –≤–≤–µ–¥–∏—Ç–µ 'exit'\")\n",
    "    print()\n",
    "    print(\"–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞–ª—é—Ç—ã: RUB, USD, EUR, GBP, JPY, CNY, KZT\")\n",
    "    print(\"\\n–ü—Ä–∏–º–µ—Ä: 1000 RUB -> USD\")\n",
    "    print()\n",
    "    \n",
    "    while True:\n",
    "        try:\n",
    "            amount_input = input(\"–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É: \")\n",
    "            if amount_input.lower() == 'exit':\n",
    "                break\n",
    "            \n",
    "            amount = float(amount_input)\n",
    "            from_curr = input(\"–ò–∑ –≤–∞–ª—é—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä RUB): \").strip().upper() or \"RUB\"\n",
    "            to_curr = input(\"–í –≤–∞–ª—é—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä USD): \").strip().upper() or \"USD\"\n",
    "            \n",
    "            result = converter.convert(amount, from_curr, to_curr)\n",
    "            \n",
    "            if result is not None:\n",
    "                print(f\"\\nüí± {amount} {from_curr} = {result} {to_curr}\")\n",
    "                print()\n",
    "            else:\n",
    "                print(\"‚ùå –û—à–∏–±–∫–∞: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∞ –≤–∞–ª—é—Ç\\n\")\n",
    "                \n",
    "        except ValueError:\n",
    "            print(\"‚ùå –û—à–∏–±–∫–∞: –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É\\n\")\n",
    "        except KeyboardInterrupt:\n",
    "            print(\"\\n\\n–í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã\")\n",
    "            break\n",
    "\n",
    "if __name__ == \"__main__\":\n",
    "    main()"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python [conda env:base] *",
   "language": "python",
   "name": "conda-base-py"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
